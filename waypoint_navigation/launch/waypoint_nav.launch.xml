<?xml version="1.0"?>
<launch>
  <!-- Arguments -->
  <arg name="use_sim_time" default="false"/>
  <arg name="waypoints_file" default="$(find-pkg-share waypoint_navigation)/waypoints_cfg/waypoints.yaml"/>
  <arg name="world_frame" default="map"/>
  <arg name="robot_frame" default="base_footprint"/>
  <arg name="min_dist_err" default="0.3"/>
  <arg name="min_yaw_err" default="0.3"/>
  <arg name="timeout_restart_nav" default="5.0"/>
  <arg name="from_middle" default="false"/>
  <arg name="tandem_scan" default="merged_scan"/>
  <arg name="use_angle" default="20.0"/>
  <arg name="danger_dist" default="2.0"/>
  <arg name="costmaps_file" default="$(find-pkg-share waypoint_navigation)/config/switch_costmaps.yaml"/>

  <!-- Node for waypoints navigation -->
  <node pkg="waypoint_navigation" exec="waypoint_nav" output="screen" launch-prefix="xterm -e">
    <param name="waypoints_file" value="$(var waypoints_file)"/>
    <param name="world_frame" value="$(var world_frame)"/>
    <param name="robot_frame" value="$(var robot_frame)"/>
    <param name="min_dist_err" value="$(var min_dist_err)"/>
    <param name="min_yaw_err" value="$(var min_yaw_err)"/>
    <param name="timeout_restart_nav" value="$(var timeout_restart_nav)"/>
    <param name="start_from_middle" value="$(var from_middle)"/>
    <param name="use_sim_time" value="$(var use_sim_time)"/>
  </node>

  <!-- Node for traffic congestion management -->
  <node pkg="waypoint_navigation" exec="tandem_run_manager.py" output="screen">
    <param name="waypoints_file" value="$(var waypoints_file)"/>
    <param name="use_angle" value="$(var use_angle)"/>
    <param name="danger_dist" value="$(var danger_dist)"/>
    <param name="use_sim_time" value="$(var use_sim_time)"/>
    <param from="$(var costmaps_file)"/>
    <remap from="scan" to="$(var tandem_scan)"/>
  </node>
</launch>
